nelmio_api_doc:
    documentation:
        info:
            title: Product API
            description: REST API for Product Management with JWT Authentication
            version: 1.0.0
        
        components:
            securitySchemes:
                bearerAuth:
                    type: http
                    scheme: bearer
                    bearerFormat: JWT
        
        security:
            - bearerAuth: []
        
        paths:
            /api/register:
                post:
                    tags:
                        - Authentication
                    summary: Register a new user
                    security: []
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    required:
                                        - email
                                        - password
                                    properties:
                                        email:
                                            type: string
                                            format: email
                                        password:
                                            type: string
                                            minLength: 8
                    responses:
                        '201':
                            description: User registered successfully
                        '409':
                            description: Email already in use
                        '422':
                            description: Validation error
            
            /api/login:
                post:
                    tags:
                        - Authentication
                    summary: Login user
                    security: []
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    required:
                                        - email
                                        - password
                                    properties:
                                        email:
                                            type: string
                                            format: email
                                        password:
                                            type: string
                    responses:
                        '200':
                            description: Login successful
                        '401':
                            description: Invalid credentials
            
            /api/refresh:
                post:
                    tags:
                        - Authentication
                    summary: Refresh access token
                    security: []
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    required:
                                        - refresh_token
                                    properties:
                                        refresh_token:
                                            type: string
                    responses:
                        '200':
                            description: Token refreshed successfully
                        '401':
                            description: Invalid or expired refresh token
            
            /api/products:
                get:
                    tags:
                        - Products
                    summary: Get all products for authenticated user
                    responses:
                        '200':
                            description: Products retrieved successfully
                        '401':
                            description: Unauthorized
                
                post:
                    tags:
                        - Products
                    summary: Create a new product
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    required:
                                        - name
                                        - price
                                    properties:
                                        name:
                                            type: string
                                            maxLength: 255
                                        price:
                                            type: number
                                            format: float
                                            minimum: 0
                    responses:
                        '201':
                            description: Product created successfully
                        '401':
                            description: Unauthorized
                        '422':
                            description: Validation error
            
            /api/products/{id}:
                get:
                    tags:
                        - Products
                    summary: Get a single product by ID
                    parameters:
                        - name: id
                          in: path
                          required: true
                          schema:
                              type: integer
                    responses:
                        '200':
                            description: Product retrieved successfully
                        '401':
                            description: Unauthorized
                        '404':
                            description: Product not found
                
                put:
                    tags:
                        - Products
                    summary: Update a product (full update)
                    parameters:
                        - name: id
                          in: path
                          required: true
                          schema:
                              type: integer
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    properties:
                                        name:
                                            type: string
                                            maxLength: 255
                                        price:
                                            type: number
                                            format: float
                                            minimum: 0
                    responses:
                        '200':
                            description: Product updated successfully
                        '401':
                            description: Unauthorized
                        '404':
                            description: Product not found
                        '422':
                            description: Validation error
                
                patch:
                    tags:
                        - Products
                    summary: Update a product (partial update)
                    parameters:
                        - name: id
                          in: path
                          required: true
                          schema:
                              type: integer
                    requestBody:
                        required: true
                        content:
                            application/json:
                                schema:
                                    type: object
                                    properties:
                                        name:
                                            type: string
                                            maxLength: 255
                                        price:
                                            type: number
                                            format: float
                                            minimum: 0
                    responses:
                        '200':
                            description: Product updated successfully
                        '401':
                            description: Unauthorized
                        '404':
                            description: Product not found
                        '422':
                            description: Validation error
                
                delete:
                    tags:
                        - Products
                    summary: Delete a product
                    parameters:
                        - name: id
                          in: path
                          required: true
                          schema:
                              type: integer
                    responses:
                        '200':
                            description: Product deleted successfully
                        '401':
                            description: Unauthorized
                        '404':
                            description: Product not found

    areas:
        path_patterns:
            - ^/api(?!/doc$)
